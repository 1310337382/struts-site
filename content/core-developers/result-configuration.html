<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="Date-Revision-yyyymmdd" content="20140918"/>
  <meta http-equiv="Content-Language" content="en"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Result Configuration</title>

  <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,400italic,600italic,700italic" rel="stylesheet" type="text/css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/custom.css" rel="stylesheet">
  <link href="/highlighter/github-theme.css" rel="stylesheet">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script type="text/javascript" src="/bootstrap/js/bootstrap.js"></script>
  <script type="text/javascript" src="/js/community.js"></script>
</head>
<body>

<a href="http://github.com/apache/struts" class="github-ribbon">
  <img style="position: absolute; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
</a>

<header>
  <nav>
    <div role="navigation" class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" data-toggle="collapse" data-target="#struts-menu" class="navbar-toggle">
            Menu
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="/index.html" class="navbar-brand logo"><img src="/img/struts-logo.svg"></a>
        </div>
        <div id="struts-menu" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                Home<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><a href="/index.html">Welcome</a></li>
                <li><a href="/downloads.html">Downloads</a></li>
                <li><a href="/announce.html">Announcements</a></li>
                <li><a href="http://www.apache.org/licenses/">License</a></li>
                <li><a href="http://apache.org/foundation/thanks.html">Thanks!</a></li>
                <li><a href="http://apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                Support<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><a href="/mail.html">User Mailing List</a></li>
                <li><a href="https://issues.apache.org/jira/browse/WW">Issue Tracker</a></li>
                <li><a href="/security.html">Reporting Security Issues</a></li>
                <li class="divider"></li>
                <li><a href="/maven/project-info.html">Project info</a></li>
                <li><a href="/maven/struts2-core/dependencies.html">Struts Core dependencies</a></li>
                <li><a href="/maven/struts2-plugins/modules.html">Plugin dependencies</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                Documentation<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><a href="/birdseye.html">Birds Eye</a></li>
                <li><a href="/primer.html">Key Technologies</a></li>
                <li><a href="/kickstart.html">Kickstart FAQ</a></li>
                <li><a href="https://cwiki.apache.org/confluence/display/WW/Home">Wiki</a></li>
                <li class="divider"></li>
                <li><a href="/getting-started/">Getting Started</a></li>
                <li><a href="/security/">Security Guide</a></li>
                <li><a href="/docs/tutorials.html">Tutorials</a></li>
                <li><a href="/docs/faqs.html">FAQs</a></li>
                <li><a href="/docs/guides.html">Guides</a></li>
                <li class="divider"></li>
                <li><a href="/maven/struts2-core/apidocs/index.html">Struts Core API</a></li>
                <li><a href="/docs/plugins.html">Plugin APIs</a></li>
                <li><a href="/docs/tag-reference.html">Tag reference</a></li>
                <li><a href="http://cwiki.apache.org/S2PLUGINS/home.html">Plugin registry</a></li>
                <li class="divider"></li>                
                <li><a href="/core-developers/">Core Developers Guide (WIP)</a></li>
                <li><a href="/plugins/">Plugins (WIP)</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                Contributing<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><a href="/youatstruts.html">You at Struts</a></li>
                <li><a href="/helping.html">How to Help FAQ</a></li>
                <li><a href="/dev-mail.html">Development Lists</a></li>
                <li class="divider"></li>
                <li><a href="/submitting-patches.html">Submitting patches</a></li>
                <li><a href="/builds.html">Source Code</a></li>
                <li><a href="/coding-standards.html">Coding standards</a></li>
                <li class="divider"></li>
                <li><a href="/releases.html">Release Guidelines</a></li>
                <li><a href="/bylaws.html">PMC Charter</a></li>
                <li><a href="/volunteers.html">Volunteers</a></li>
                <li><a href="https://git-wip-us.apache.org/repos/asf?p=struts.git">Source Repository</a></li>
              </ul>
            </li>
            <li class="apache"><a href="http://www.apache.org/"><img src="/img/apache.png"></a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
</header>


<article class="container">
  <section class="col-md-12">
    <a href="index.html" title="back to Core Developers Guide"><< back to Core Developers Guide</a>
    <h1 id="result-configuration">Result Configuration</h1>

<p>When an <em>action</em>  class method completes, it returns a String. The value of the String is used to select a result element. An action mapping will often have a set of results representing different possible outcomes. A standard set of result tokens are defined by the</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ActionSupport
</code></pre>
</div>
<p>base class.</p>

<p><strong>Predefined result names</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>String SUCCESS = "success";
String NONE    = "none";
String ERROR   = "error";
String INPUT   = "input";
String LOGIN   = "login";

</code></pre>
</div>

<p>Of course, applications can define other result tokens to match specific cases.</p>

<p>(information) Returning</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ActionSupport.NONE
</code></pre>
</div>
<p>(or</p>

<div class="highlighter-rouge"><pre class="highlight"><code>null
</code></pre>
</div>
<p>) from an <em>action</em>  class method causes the results processing to be skipped. This is useful if the action fully handles the result processing such as writing directly to the HttpServletResponse OutputStream.</p>

<p>#####Result Elements#####</p>

<p>The result element has two jobs. First, it provides a logical name. An</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Action
</code></pre>
</div>
<p>can pass back a token like “success” or “error” without knowing any other implementation details. Second, the result element provides a result type. Most results simply forward to a server page or template, but other <a href="result-types.html">Result Types</a> can be used to do more interesting things.</p>

<p><strong>Intelligent Defaults</strong></p>

<p>Each package may set a default result type to be used if none is specified in a result element. If one package extends another, the “child” package can set its own default result, or inherit one from the parent.</p>

<p><strong>Setting a default Result Type</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;result-types&gt;
   &lt;result-type name="dispatcher" default="true"
                class="org.apache.struts2.dispatcher.ServletDispatcherResult" /&gt;
&lt;/result-types&gt;
</code></pre>
</div>

<p>If a</p>

<div class="highlighter-rouge"><pre class="highlight"><code>type
</code></pre>
</div>
<p>attribute is not specified, the framework will use the default</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dispatcher
</code></pre>
</div>
<p>type, which forwards to another web resource. If the resource is a JavaServer Page, then the container will render it, using its JSP engine.</p>

<p>Likewise if the</p>

<div class="highlighter-rouge"><pre class="highlight"><code>name
</code></pre>
</div>
<p>attribute is not specified, the framework will give it the name “success”.</p>

<p>Using these intelligent defaults, the most often used result types also become the simplest.</p>

<p><strong>Result element without defaults</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;result name="success" type="dispatcher"&gt;
    &lt;param name="location"&gt;/ThankYou.jsp&lt;/param&gt;
&lt;/result&gt;

</code></pre>
</div>

<p><strong>A Result element using some defaults</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;result&gt;
    &lt;param name="location"&gt;/ThankYou.jsp&lt;/param&gt;
&lt;/result&gt;

</code></pre>
</div>

<p>The</p>

<div class="highlighter-rouge"><pre class="highlight"><code>param
</code></pre>
</div>
<p>tag sets a property on the Result object. The most commonly-set property is</p>

<div class="highlighter-rouge"><pre class="highlight"><code>location
</code></pre>
</div>
<p>, which usually specifies the path to a web resources. The</p>

<div class="highlighter-rouge"><pre class="highlight"><code>param
</code></pre>
</div>
<p>attribute is another intelligent default.</p>

<p><strong>Result element using more defaults</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;result&gt;/ThankYou.jsp&lt;/result&gt;

</code></pre>
</div>

<p>Mixing results with intelligent defaults with other results makes it easier to see the “critical path”.</p>

<p><strong>Multiple Results</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;action name="Hello"&gt;
    &lt;result&gt;/hello/Result.jsp&lt;/result&gt;
    &lt;result name="error"&gt;/hello/Error.jsp&lt;/result&gt;
    &lt;result name="input"&gt;/hello/Input.jsp&lt;/result&gt;
&lt;/action&gt;

</code></pre>
</div>

<p>A special ‘other’ result can be configured by adding a result with name=”*”. This result will only be selected if no result is found with a matching name.</p>

<p><strong>’*’ Other Result</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;action name="Hello"&gt;
    &lt;result&gt;/hello/Result.jsp&lt;/result&gt;
    &lt;result name="error"&gt;/hello/Error.jsp&lt;/result&gt;
    &lt;result name="input"&gt;/hello/Input.jsp&lt;/result&gt;
    &lt;result name="*"&gt;/hello/Other.jsp&lt;/result&gt;
&lt;/action&gt;

</code></pre>
</div>

<p>(information) The name=”*” is <strong>not</strong> a wildcard pattern, it is a special name that is only selected if an exact match is not found.</p>

<p>(!)  In most cases if an action returns an unrecognized result name this would be a programming error and should be fixed.</p>

<p><strong>Multiple names</strong></p>

<p>It is possible to define multiple names for the same result:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;action name="save"&gt;
    &lt;result&gt;success.jsp&lt;/result&gt;
    &lt;result name="error, input"&gt;input-form.jsp&lt;/result&gt;
&lt;/action&gt;
</code></pre>
</div>

<p>Such functionality was added in Struts 2.5</p>

<p>#####Global Results#####</p>

<p>Most often, results are nested with the action element. But some results apply to multiple actions. In a secure application, a client might try to access a page without being authorized, and many actions may need access to a “logon” result.</p>

<p>If actions need to share results, a set of global results can be defined for each package. The framework will first look for a local result nested in the action. If a local match is not found, then the global results are checked.</p>

<p><strong>Defining global results</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;global-results&gt;
    &lt;result name="error"&gt;/Error.jsp&lt;/result&gt;
    &lt;result name="invalid.token"&gt;/Error.jsp&lt;/result&gt;
    &lt;result name="login" type="redirectAction"&gt;Logon!input&lt;/result&gt;
&lt;/global-results&gt;

</code></pre>
</div>

<p>(light-on) For more about results, see <a href="result-types.html">Result Types</a>.</p>

<p>#####Dynamic Results#####</p>

<p>A result may not be known until execution time. Consider the implementation of a state-machine-based execution flow; the next state might depend on any combination of form input elements, session attributes, user roles, moon phase, etc. In other words, determining the next action, input page, etc. may not be known at configuration time.</p>

<p>Result values may be retrieved from its corresponding Action implementation by using EL expressions that access the Action’s properties, just like the Struts 2 tag libraries. So given the following Action fragment:</p>

<p><strong>FragmentAction implementation</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>private String nextAction;

public String getNextAction() {
    return nextAction;
}

</code></pre>
</div>

<p>you might define a result like this:</p>

<p><strong>FragmentAction configuration</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;action name="fragment" class="FragmentAction"&gt;
    &lt;result name="next" type="redirectAction"&gt;${nextAction}&lt;/result&gt;
&lt;/action&gt;

</code></pre>
</div>

<p>If a</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FragmentAction
</code></pre>
</div>
<p>method returns “next” the actual <em>value</em>  of that result will be whatever is in</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FragmentAction
</code></pre>
</div>
<p>’s</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nextAction
</code></pre>
</div>
<p>property. So</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nextAction
</code></pre>
</div>
<p>may be computed based on whatever state information necessary then passed at runtime to “next”’s</p>

<div class="highlighter-rouge"><pre class="highlight"><code>redirectAction
</code></pre>
</div>
<p>.</p>

<p>See <em>Parameters in configuration results</em>  for an expanded discussion.</p>

<p> </p>

<p>#####Returning Result Objects#####</p>

<p>Instead of configuring results and returning the name, it is possible to return a result object:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>public Result runAction() {
	ServletDispatcherResult result = new ServletDispatcherResult();
	result.setLocation("input-form.jsp");
	return result;
}
</code></pre>
</div>

<p> </p>

  </section>
</article>


<footer class="container">
  <div class="col-md-12">
    Copyright &copy; 2000-2016 <a href="http://www.apache.org/">The Apache Software Foundation </a>.
    All Rights Reserved.
  </div>
  <div class="col-md-12">
    Apache Struts, Struts, Apache, the Apache feather logo, and the Apache Struts project logos are
    trademarks of The Apache Software Foundation.
  </div>
  <div class="col-md-12">Logo and website design donated by <a href="https://softwaremill.com/">SoftwareMill</a>.</div>
</footer>

<script>!function (d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (!d.getElementById(id)) {
    js = d.createElement(s);
    js.id = id;
    js.src = "//platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);
  }
}(document, "script", "twitter-wjs");</script>
<script src="https://apis.google.com/js/platform.js" async="async" defer="defer"></script>

<div id="fb-root"></div>

<script>(function (d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s);
  js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<script>
$(function() {
  return $("h2, h3, h4, h5, h6").each(function(i, el) {
    var $el, id;
    $el = $(el);
    id = $el.attr('id');
    if (id) {
      $el.removeAttr('id');
      return $el.before($("<a />").addClass('anchor').attr('name', id));
    }
  });
});
</script>

</body>
</html>
