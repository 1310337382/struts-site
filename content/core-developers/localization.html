<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="Date-Revision-yyyymmdd" content="20140918"/>
  <meta http-equiv="Content-Language" content="en"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Localization</title>

  <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,400italic,600italic,700italic" rel="stylesheet" type="text/css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/custom.css" rel="stylesheet">
  <link href="/highlighter/github-theme.css" rel="stylesheet">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script type="text/javascript" src="/bootstrap/js/bootstrap.js"></script>
  <script type="text/javascript" src="/js/community.js"></script>
</head>
<body>

<a href="http://github.com/apache/struts" class="github-ribbon">
  <img style="position: absolute; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub">
</a>

<header>
  <nav>
    <div role="navigation" class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" data-toggle="collapse" data-target="#struts-menu" class="navbar-toggle">
            Menu
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="/index.html" class="navbar-brand logo"><img src="/img/struts-logo.svg"></a>
        </div>
        <div id="struts-menu" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
              <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                Home<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><a href="/index.html">Welcome</a></li>
                <li><a href="/downloads.html">Downloads</a></li>
                <li><a href="/announce.html">Announcements</a></li>
                <li><a href="http://www.apache.org/licenses/">License</a></li>
                <li><a href="http://apache.org/foundation/thanks.html">Thanks!</a></li>
                <li><a href="http://apache.org/foundation/sponsorship.html">Sponsorship</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                Support<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><a href="/mail.html">User Mailing List</a></li>
                <li><a href="https://issues.apache.org/jira/browse/WW">Issue Tracker</a></li>
                <li><a href="/security.html">Reporting Security Issues</a></li>
                <li class="divider"></li>
                <li><a href="/maven/project-info.html">Project info</a></li>
                <li><a href="/maven/struts2-core/dependencies.html">Struts Core dependencies</a></li>
                <li><a href="/maven/struts2-plugins/modules.html">Plugin dependencies</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                Documentation<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><a href="/birdseye.html">Birds Eye</a></li>
                <li><a href="/primer.html">Key Technologies</a></li>
                <li><a href="/kickstart.html">Kickstart FAQ</a></li>
                <li><a href="https://cwiki.apache.org/confluence/display/WW/Home">Wiki</a></li>
                <li class="divider"></li>
                <li><a href="/getting-started/">Getting Started</a></li>
                <li><a href="/security/">Security Guide</a></li>
                <li><a href="/docs/tutorials.html">Tutorials</a></li>
                <li><a href="/docs/faqs.html">FAQs</a></li>
                <li><a href="/docs/guides.html">Guides</a></li>
                <li class="divider"></li>
                <li><a href="/maven/struts2-core/apidocs/index.html">Struts Core API</a></li>
                <li><a href="/docs/plugins.html">Plugin APIs</a></li>
                <li><a href="/docs/tag-reference.html">Tag reference</a></li>
                <li><a href="http://cwiki.apache.org/S2PLUGINS/home.html">Plugin registry</a></li>
                <li class="divider"></li>                
                <li><a href="/core-developers/">Core Developers Guide (WIP)</a></li>
                <li><a href="/plugins/">Plugins (WIP)</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                Contributing<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><a href="/youatstruts.html">You at Struts</a></li>
                <li><a href="/helping.html">How to Help FAQ</a></li>
                <li><a href="/dev-mail.html">Development Lists</a></li>
                <li class="divider"></li>
                <li><a href="/submitting-patches.html">Submitting patches</a></li>
                <li><a href="/builds.html">Source Code</a></li>
                <li><a href="/coding-standards.html">Coding standards</a></li>
                <li class="divider"></li>
                <li><a href="/releases.html">Release Guidelines</a></li>
                <li><a href="/bylaws.html">PMC Charter</a></li>
                <li><a href="/volunteers.html">Volunteers</a></li>
                <li><a href="https://git-wip-us.apache.org/repos/asf?p=struts.git">Source Repository</a></li>
              </ul>
            </li>
            <li class="apache"><a href="http://www.apache.org/"><img src="/img/apache.png"></a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
</header>


<article class="container">
  <section class="col-md-12">
    <a href="index.html" title="back to Core Developers Guide"><< back to Core Developers Guide</a>
    <a class="edit-on-gh" href="https://github.com/apache/struts-site/edit/master/source/core-developers/localization.md" title="Edit this page on GitHub">Edit on GitHub</a>
    <h1 id="localization">Localization</h1>

<p>####Overview####</p>

<p>The framework supports internationalization (i18n) in the following places:</p>

<ol>
  <li>
    <p>the <em>UI Tags</em></p>
  </li>
  <li>
    <p>Messages and Errors from the <a href="http://struts.apache.org/2.0.6/struts2-core/apidocs/index.html?com/opensymphony/xwork2/ValidationAware.html">ValidationAware</a>^[http://struts.apache.org/2.0.6/struts2-core/apidocs/index.html?com/opensymphony/xwork2/ValidationAware.html] interface (implemented by <a href="http://struts.apache.org/2.0.6/struts2-core/apidocs/index.html?com/opensymphony/xwork2/ActionSupport.html">ActionSupport</a>^[http://struts.apache.org/2.0.6/struts2-core/apidocs/index.html?com/opensymphony/xwork2/ActionSupport.html] and <a href="http://struts.apache.org/2.0.6/struts2-core/apidocs/index.html?com/opensymphony/xwork2/ValidationAwareSupport.html">ValidationAwareSupport</a>^[http://struts.apache.org/2.0.6/struts2-core/apidocs/index.html?com/opensymphony/xwork2/ValidationAwareSupport.html])</p>
  </li>
  <li>
    <p>Within action classes that extend <a href="http://struts.apache.org/2.0.6/struts2-core/apidocs/index.html?com/opensymphony/xwork2/ActionSupport.html">ActionSupport</a>^[http://struts.apache.org/2.0.6/struts2-core/apidocs/index.html?com/opensymphony/xwork2/ActionSupport.html] through the getText() method</p>
  </li>
</ol>

<p>####Resource Bundle Search Order####</p>

<p>Resource bundles are searched in the following order:</p>

<ol>
  <li></li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>ActionClass
</code></pre>
</div>
<p>.properties</p>

<ol>
  <li></li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>Interface
</code></pre>
</div>
<p>.properties (every interface and sub-interface)</p>

<ol>
  <li></li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>BaseClass
</code></pre>
</div>
<p>.properties (all the way to Object.properties)</p>

<ol>
  <li>
    <p>ModelDriven’s model (if implements ModelDriven), for the model object repeat from 1</p>
  </li>
  <li>
    <p>package.properties (of the directory where class is located and every parent directory all the way to the root directory)</p>
  </li>
  <li>
    <p>search up the i18n message key hierarchy itself</p>
  </li>
  <li>
    <p>global resource properties</p>
  </li>
</ol>

<p>This is how it is implemented in a default implementation of the </p>

<div class="highlighter-rouge"><pre class="highlight"><code>LocalizedTextProvider
</code></pre>
</div>
<p> interface. You can provide your own implementation using</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TextProvider
</code></pre>
</div>
<p> and</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TextProviderFactory
</code></pre>
</div>
<p> interfaces.</p>

<table>
  <tbody>
    <tr>
      <td>To clarify #5, while traversing the package hierarchy, Struts 2 will look for a file package.properties:</td>
    </tr>
  </tbody>
</table>

<p>| com/
     acme/
         package.properties
         actions/
                 package.properties
                 FooAction.java
                 FooAction.properties</p>

<table>
  <tbody>
    <tr>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>If FooAction.properties does not exist, com/acme/action/package.properties will be searched for, if not found com/acme/package.properties, if not found com/package.properties, etc.</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
    </tr>
  </tbody>
</table>

<p>#####Default action’s class#####</p>

<p>If you configure action as follow</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;action name="index"&gt;
   &lt;result&gt;/index.jsp&lt;/result&gt;
&lt;/action&gt;
</code></pre>
</div>

<p>it will use a default class defined with </p>

<div class="highlighter-rouge"><pre class="highlight"><code>default-class-ref
</code></pre>
</div>
<p> in </p>

<div class="highlighter-rouge"><pre class="highlight"><code>struts-default.xml
</code></pre>
</div>
<p>which is </p>

<div class="highlighter-rouge"><pre class="highlight"><code>com.opensymphony.xwork2.ActionSupport
</code></pre>
</div>
<p>. It means you have two options here to get I18N working in that case:</p>

<ul>
  <li>define </li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>com/opensymphony/xwork2/ActionSupport.properties
</code></pre>
</div>
<p>and put messages there</p>

<ul>
  <li>point </li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>default-class-ref
</code></pre>
</div>
<p>to your base class and then defined appropriated</p>

<div class="highlighter-rouge"><pre class="highlight"><code>.properties
</code></pre>
</div>
<p> file (corresponding to class’ name or package)</p>

<p>Examples</p>

<p>There are several ways to access the message resources, including</p>

<div class="highlighter-rouge"><pre class="highlight"><code>getText
</code></pre>
</div>
<p>, the</p>

<div class="highlighter-rouge"><pre class="highlight"><code>text
</code></pre>
</div>
<p>tag, and the</p>

<div class="highlighter-rouge"><pre class="highlight"><code>i18n
</code></pre>
</div>
<p>tag.</p>

<p>#####Using getText from a Tag#####</p>

<p>To display i18n text, use a call to</p>

<div class="highlighter-rouge"><pre class="highlight"><code>getText
</code></pre>
</div>
<p>in the <em>property</em>  tag, or any other tag, such as the UI tags. (The</p>

<div class="highlighter-rouge"><pre class="highlight"><code>getText
</code></pre>
</div>
<p>technique is especially useful for labels of UI tags.)</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">snippet:id=i18nExample|javadoc=true|lang=xml|url=org.apache.struts2.components.Property</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The default implementation of TextProvider which is used in ActionSupport perform evaluation of value read from bundle base on the provided key, see <em>Localizing Output</em>  for an example.</p>

<table>
  <tbody>
    <tr>
    </tr>
  </tbody>
</table>

<p>#####Using the text tag#####</p>

<p>The <em>text</em>  tag retrieves a message from the default resource bundle.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">snippet:id=i18nExample|javadoc=true|lang=xml|url=org.apache.struts2.components.Text</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>#####Using the I18n tag#####</p>

<p>The <em>i18n</em>  tag pushes an arbitrary resource bundle on to the value stack. Other tags within the scope of the i18n tag can display messages from that resource bundle.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="err">snippet:id=i18nExample|javadoc=true|lang=xml|url=org.apache.struts2.components.I18n</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Internationalizing SiteMesh decorators is possible, but there are quirks. See <em>SiteMesh Plugin</em>  for more.</p>

<table>
  <tbody>
    <tr>
    </tr>
  </tbody>
</table>

<p>#####Using the Key attribute of UI Tags#####</p>

<p>The key attribute of most UI tags can be used to retrieve a message from a resource bundle:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;s:textfield key="some.key" name="textfieldName"/&gt;
</code></pre>
</div>

<p>####I18n Interceptor####</p>

<p>Essentially, the i18n Interceptor pushes a locale into the ActionContext map upon every request. The framework components that support localization all utilize the ActionContext locale. See <a href="i18n-interceptor.html">I18n Interceptor</a> for details.</p>

<p>####Global Resources (struts.custom.i18n.resources) in struts.properties####</p>

<p>A global resource bundle could be specified programmatically, as well as the locale.</p>

<p>####Formatting Dates and Numbers####</p>

<p>See <a href="formatting-dates-and-numbers.html">Formatting Dates and Numbers</a> for more details and examples.</p>

<p>####Comparison with Struts 1####</p>

<p>Struts 1 users should be familiar with the application.properties resource bundle, where you can put all the messages in the application that are going to be translated. Struts 2, though, splits the resource bundles per action or model class, and you may end up with duplicated messages in those resource bundles. A quick fix for that is to create a file called ActionSupport.properties in com/opensymphony/xwork2 and put it on your classpath. This will only work well if all your actions subclass XWork2’s ActionSupport.</p>

<p>####Using only global bundles####</p>

<p>If you don’t need to use the package-scan-functionality and only base on the global bundles (those provided by the framework and via </p>

<div class="highlighter-rouge"><pre class="highlight"><code>struts.custom.i18n.resources
</code></pre>
</div>
<p>) you can use existing </p>

<div class="highlighter-rouge"><pre class="highlight"><code>GlobalLocalizedTextProvider
</code></pre>
</div>
<p>implementation. To use this please define the following option in your </p>

<div class="highlighter-rouge"><pre class="highlight"><code>struts.xml
</code></pre>
</div>
<p>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;constant name="struts.localizedTextProvider" value="global-only" /&gt;
</code></pre>
</div>

<p>####Custom TextProvider and TextProviderFactory####</p>

<p>If you want use a different logic to search for localized messages, or you want to use a database or just want to search default bundles, you must implement both those interfaces (or subclass the existing implementations). You can check a small <a href="https://github\.com/apache/struts\-examples/tree/master/text\-provider">example app</a>^[https://github.com/apache/struts-examples/tree/master/text-provider] how to use both. Please remember that the </p>

<div class="highlighter-rouge"><pre class="highlight"><code>TextProvider
</code></pre>
</div>
<p>interface is implemented by the </p>

<div class="highlighter-rouge"><pre class="highlight"><code>ActioSupport
</code></pre>
</div>
<p>class, that’s why an extra layer - </p>

<div class="highlighter-rouge"><pre class="highlight"><code>TextProviderFactory
</code></pre>
</div>
<p>- is needed.</p>

  </section>
</article>


<footer class="container">
  <div class="col-md-12">
    Copyright &copy; 2000-2016 <a href="http://www.apache.org/">The Apache Software Foundation </a>.
    All Rights Reserved.
  </div>
  <div class="col-md-12">
    Apache Struts, Struts, Apache, the Apache feather logo, and the Apache Struts project logos are
    trademarks of The Apache Software Foundation.
  </div>
  <div class="col-md-12">Logo and website design donated by <a href="https://softwaremill.com/">SoftwareMill</a>.</div>
</footer>

<script>!function (d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (!d.getElementById(id)) {
    js = d.createElement(s);
    js.id = id;
    js.src = "//platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);
  }
}(document, "script", "twitter-wjs");</script>
<script src="https://apis.google.com/js/platform.js" async="async" defer="defer"></script>

<div id="fb-root"></div>

<script>(function (d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s);
  js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


<script>
$(function() {
  return $("h2, h3, h4, h5, h6").each(function(i, el) {
    var $el, id;
    $el = $(el);
    id = $el.attr('id');
    if (id) {
      $el.removeAttr('id');
      return $el.before($("<a />").addClass('anchor').attr('name', id));
    }
  });
});
</script>

</body>
</html>
