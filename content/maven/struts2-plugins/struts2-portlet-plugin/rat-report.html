<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-07-28 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170728" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Struts 2 &#x2013; Rat (Release Audit Tool) results</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://www.apache.org/" id="bannerLeft">
                                                                                        <img src="http://www.apache.org/images/asf-logo.gif"  alt="Apache Software Foundation"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://struts.apache.org/" id="bannerRight">
                                                                                        <img src="http://struts.apache.org/img/struts-logo.svg"  alt="Apache Struts"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
            
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://struts.apache.org/" class="externalLink" title="Struts">
        Struts</a>
      </li>

  
    <li class="pull-right">
                      <a href="http://www.apache.org/" class="externalLink" title="Apache">
        Apache</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../index.html" title="Struts Plugins">
          <i class="none"></i>
        Struts Plugins</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                              
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-down"></i>
        Project Reports</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><i class="none"></i>Rat Report</a>
          </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2><a name="Rat_Release_Audit_Tool_results"></a>Rat (Release Audit Tool) results</h2>
<p>The following document contains the results of <a class="externalLink" href="http://creadur.apache.org/rat/apache-rat-plugin/">Rat (Release Audit Tool)</a>.</p>
<p></p>
<div class="source">
<pre>
*****************************************************
Summary
-------
Generated at: 2017-07-28T10:44:44+02:00
Notes: 1
Binaries: 0
Archives: 0
Standards: 57

Apache Licensed: 43
Generated Documents: 0

JavaDocs are generated and so license header is optional
Generated files do not required license headers

14 Unknown Licenses

*******************************

Unapproved licenses:

  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/pom.xml
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/dispatcher/Jsr286Dispatcher.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletConstants.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletPhase.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelper.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelperJSR168.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelperJSR286.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletResponseJSR286.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/util/PortletUrlHelperJSR286.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/StrutsPortletTestCase.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/components/PortletAction.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/components/PortletUrlRendererTest.java
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/resources/log4j2.xml
  /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/resources/struts.xml

*******************************

Archives:

*****************************************************
  Files with Apache License headers will be marked AL
  Binary files (which do not require AL headers) will be marked B
  Compressed archives will be marked A
  Notices, licenses etc will be marked N
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/pom.xml
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/components/PortletUrlRenderer.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/context/PortletActionContext.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/dispatcher/DirectRenderFromEventAction.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/dispatcher/DispatcherServlet.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/dispatcher/Jsr168Dispatcher.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/dispatcher/Jsr286Dispatcher.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/interceptor/PortletAwareInterceptor.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/interceptor/PortletContextAware.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/interceptor/PortletPreferencesAware.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/interceptor/PortletPrincipalProxy.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/interceptor/PortletRequestAware.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/interceptor/PortletResponseAware.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/interceptor/PortletStateInterceptor.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/interceptor/ServletPortletPreferences.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletApplicationMap.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletConstants.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletPhase.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletRequestMap.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletSessionMap.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletActionRedirectResult.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResult.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelper.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelperJSR168.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelperJSR286.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletVelocityResult.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/package.html
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletHttpSession.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletConfig.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletContext.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletInputStream.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletOutputStream.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletRequest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletRequestDispatcher.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletResponse.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletResponseJSR286.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/util/PortletUrlHelper.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/util/PortletUrlHelperJSR286.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/StrutsPortletTestCase.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/views/freemarker/PortletFreemarkerResult.java
  N     /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/resources/NOTICE.txt
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/resources/struts-plugin.xml
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/site/site.xml
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/components/PortletAction.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/components/PortletUrlRendererTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/context/PortletActionContextTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/dispatcher/Jsr168DispatcherTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/dispatcher/Jsr286DispatcherTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/interceptor/PortletAwareInterceptorTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/interceptor/PortletStateInterceptorTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/PortletApplicationMapTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/PortletRequestMapTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/PortletSessionMapTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/result/PortletResultTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/portlet/util/PortletUrlHelperTest.java
  AL    /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/views/jsp/PortletUrlTagTest.java
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/resources/log4j2.xml
 !????? /Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/resources/struts.xml
 
*****************************************************
 Printing headers for files without AL header...
 
 
=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/pom.xml
=======================================================================
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;
        &lt;artifactId&gt;struts2-plugins&lt;/artifactId&gt;
        &lt;version&gt;2.5.12&lt;/version&gt;
    &lt;/parent&gt;

    &lt;artifactId&gt;struts2-portlet-plugin&lt;/artifactId&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;name&gt;Struts 2 Portlet Plugin&lt;/name&gt;

    &lt;dependencies&gt;
        &lt;!-- junit and related JARs are needed for 'compile'! --&gt;
        &lt;!-- Due to StrutsPortletTestCase shall be distributed to applications. --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;
            &lt;artifactId&gt;struts2-junit-plugin&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;

        &lt;!-- spring-core is required for javadoc of jdk8 --&gt;
        &lt;!-- It is indirectly referenced by struts2-junit-plugin. --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!-- Velocity --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.velocity&lt;/groupId&gt;
            &lt;artifactId&gt;velocity&lt;/artifactId&gt;

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/dispatcher/Jsr286Dispatcher.java
=======================================================================
package org.apache.struts2.portlet.dispatcher;

import com.opensymphony.xwork2.ActionContext;
import org.apache.logging.log4j.Logger;
import org.apache.logging.log4j.LogManager;
import org.apache.struts2.portlet.PortletPhase;
import org.apache.struts2.portlet.servlet.PortletServletResponse;
import org.apache.struts2.portlet.servlet.PortletServletResponseJSR286;

import javax.portlet.EventRequest;
import javax.portlet.EventResponse;
import javax.portlet.PortletException;
import javax.portlet.PortletRequest;
import javax.portlet.PortletResponse;
import javax.portlet.ResourceRequest;
import javax.portlet.ResourceResponse;
import java.io.IOException;

public class Jsr286Dispatcher extends Jsr168Dispatcher {

    private final static Logger LOG = LogManager.getLogger(Jsr286Dispatcher.class);


    @Override
    public void processEvent(EventRequest request, EventResponse response) throws PortletException, IOException {
        if (LOG.isDebugEnabled()) {
            LOG.debug(&quot;Entering processEvent&quot;);
        }
        resetActionContext();
        try {
            // We'll use the event name as the &quot;action&quot;
            serviceAction(request, response,
                    getRequestMap(request), getParameterMap(request),
                    getSessionMap(request), getApplicationMap(),
                    portletNamespace, PortletPhase.EVENT_PHASE);
            if (LOG.isDebugEnabled()) LOG.debug(&quot;Leaving processEvent&quot;);
        } finally {
            ActionContext.setContext(null);
        }
    }

    @Override
    public void serveResource(ResourceRequest request, ResourceResponse response)
            throws PortletException, IOException {
        if (LOG.isDebugEnabled()) {
            LOG.debug(&quot;Entering serveResource&quot;);
        }
        resetActionContext();
        try {
            serviceAction(request, response,

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletConstants.java
=======================================================================
package org.apache.struts2.portlet;

import org.apache.struts2.ServletActionContext;
import org.apache.struts2.portlet.dispatcher.DispatcherServlet;

public class PortletConstants {
	/**
     * Default action name to use when no default action has been configured in the portlet
     * init parameters.
     */
    public static String DEFAULT_ACTION_NAME = &quot;default&quot;;

    /**
     * Action name parameter name
     */
    public static String ACTION_PARAM = &quot;struts.portlet.action&quot;;

    /**
     * Key for parameter holding the last executed portlet mode.
     */
    public static String MODE_PARAM = &quot;struts.portlet.mode&quot;;

    /**
     * Key used for looking up and storing the portlet phase
     */
    public static String PHASE = &quot;struts.portlet.phase&quot;;

    /**
     * Key used for looking up and storing the
     * {@link javax.portlet.PortletRequest}
     */
    public static String REQUEST = &quot;struts.portlet.request&quot;;

    /**
     * Key used for looking up and storing the
     * {@link javax.portlet.PortletResponse}
     */
    public static String RESPONSE = &quot;struts.portlet.response&quot;;

    /**
     * Key used for looking up and storing the action that was invoked in the action or event phase.
     */
    public static String EVENT_ACTION = &quot;struts.portlet.eventAction&quot;;

    /**
     * Key used for looking up and storing the
     * {@link javax.portlet.PortletConfig}
     */
    public static String PORTLET_CONFIG = &quot;struts.portlet.config&quot;;


=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/PortletPhase.java
=======================================================================
package org.apache.struts2.portlet;

/**
 * Defines phases of portlet processing per the portlet specification.
 */
public enum PortletPhase {

    /**
     * Constant used for the render phase (
     * {@link javax.portlet.Portlet#render(javax.portlet.RenderRequest, javax.portlet.RenderResponse)})
     */
    RENDER_PHASE,

    /**
     * Constant used for the action phase (
     * {@link javax.portlet.Portlet#processAction(javax.portlet.ActionRequest, javax.portlet.ActionResponse)})
     */
    ACTION_PHASE,

    /**
     * Constant used for the event phase
     */
    EVENT_PHASE,

    /**
     * Constant used for the serve resource phase that was added with the 2.0 portlet specification.
     */
    SERVE_RESOURCE_PHASE;

    public boolean isRender() {
        return this.equals(RENDER_PHASE);
    }

    public boolean isAction() {
        return this.equals(ACTION_PHASE);
    }

    public boolean isEvent() {
        return this.equals(EVENT_PHASE);
    }

    public boolean isResource() {
        return this.equals(SERVE_RESOURCE_PHASE);
    }

}

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelper.java
=======================================================================
package org.apache.struts2.portlet.result;

import javax.portlet.*;
import java.io.IOException;

/**
 * PortletResultHelper abstracts Portlet API result functions specific to the used API spec version.
 *
 * @author Rene Gielen
 */

public interface PortletResultHelper {

    /**
     * Set a render parameter, abstracted from the used Portlet API version
     *
     * @param response The response to set the parameter on.
     * @param key      The parameter key to set.
     * @param value    The parameter value to set.
     */
    void setRenderParameter( PortletResponse response, String key, String value );

    /**
     * Set a portlet mode, abstracted from the used Portlet API version
     *
     * @param response    The response to set the portlet mode on.
     * @param portletMode The portlet mode to set.
     *
     * @throws PortletModeException in case of errors during setting of portlet mode
     */
    void setPortletMode( PortletResponse response, PortletMode portletMode ) throws PortletModeException;

    /**
     * Call a dispatcher's include method, abstracted from the used Portlet API version.
     *
     * @param dispatcher  The dispatcher to call the include method on.
     * @param contentType The content type to set for the response.
     * @param request     The request to use for including
     * @param response    The response to use for including
     *
     * @throws IOException in case of any I/O errors
     * @throws PortletException in case of any portlet errors
     */
    void include( PortletRequestDispatcher dispatcher, String contentType, PortletRequest request,
                  PortletResponse response ) throws IOException, PortletException;
}

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelperJSR168.java
=======================================================================
package org.apache.struts2.portlet.result;

import javax.portlet.*;
import java.io.IOException;

/**
 * PortletResultHelperJSR168 implements PortletResultHelper for Portlet 1.0 API (JSR168).
 *
 * @author Rene Gielen
 */
public class PortletResultHelperJSR168 implements PortletResultHelper {

    /**
     * Set a render parameter, abstracted from the used Portlet API version. This implementation assumes that the given
     * response must be a {@link javax.portlet.ActionResponse}, as JSR168 implies.
     *
     * @param response The response to set the parameter on.
     * @param key      The parameter key to set.
     * @param value    The parameter value to set.
     */
    public void setRenderParameter( PortletResponse response, String key, String value ) {
        ((ActionResponse) response).setRenderParameter(key, value);
    }

    /**
     * Set a portlet mode, abstracted from the used Portlet API version. This implementation assumes that the given
     * response must be a {@link javax.portlet.ActionResponse}, as JSR168 implies.
     *
     * @param response    The response to set the portlet mode on.
     * @param portletMode The portlet mode to set.
     */
    public void setPortletMode( PortletResponse response, PortletMode portletMode ) throws PortletModeException {
        ((ActionResponse) response).setPortletMode(portletMode);
    }

    /**
     * Call a dispatcher's include method, abstracted from the used Portlet API version. This implementation assumes
     * that the given the request must be a {@link javax.portlet.RenderRequest} and the response must be a {@link
     * javax.portlet.RenderResponse}, as JSR168 implies.
     *
     * @param dispatcher  The dispatcher to call the include method on.
     * @param contentType The content type to set for the response.
     * @param request     The request to use for including
     * @param response    The response to use for including
     */
    public void include( PortletRequestDispatcher dispatcher, String contentType, PortletRequest request,
                         PortletResponse response ) throws IOException, PortletException {
        RenderRequest req = (RenderRequest) request;
        RenderResponse res = (RenderResponse) response;
        res.setContentType(contentType);

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/result/PortletResultHelperJSR286.java
=======================================================================
package org.apache.struts2.portlet.result;

import javax.portlet.*;
import java.io.IOException;

/**
 * PortletResultHelperJSR286 implements PortletResultHelper for Portlet 2.0 API (JSR286).
 *
 * @author Rene Gielen
 */
public class PortletResultHelperJSR286 implements PortletResultHelper {

    /**
     * Set a render parameter, abstracted from the used Portlet API version. This implementation assumes that the given
     * response is a {@link javax.portlet.StateAwareResponse}, as JSR286 implies.
     *
     * @param response The response to set the parameter on.
     * @param key      The parameter key to set.
     * @param value    The parameter value to set.
     */
    public void setRenderParameter( PortletResponse response, String key, String value ) {
        ((StateAwareResponse) response).setRenderParameter(key, value);
    }

    /**
     * Set a portlet mode, abstracted from the used Portlet API version. This implementation assumes that the given
     * response is a {@link javax.portlet.StateAwareResponse}, as JSR286 implies.
     *
     * @param response    The response to set the portlet mode on.
     * @param portletMode The portlet mode to set.
     */
    public void setPortletMode( PortletResponse response, PortletMode portletMode ) throws PortletModeException {
        ((StateAwareResponse) response).setPortletMode(portletMode);
    }

    /**
     * Call a dispatcher's include method, abstracted from the used Portlet API version. This implementation assumes
     * that the response is a {@link javax.portlet.MimeResponse}, as JSR286 implies.
     *
     * @param dispatcher  The dispatcher to call the include method on.
     * @param contentType The content type to set for the response.
     * @param request     The request to use for including
     * @param response    The response to use for including
     */
    public void include( PortletRequestDispatcher dispatcher, String contentType, PortletRequest request,
                         PortletResponse response ) throws IOException, PortletException {
        MimeResponse res = (MimeResponse) response;
        res.setContentType(contentType);
        dispatcher.include(request, res);
    }

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/servlet/PortletServletResponseJSR286.java
=======================================================================
package org.apache.struts2.portlet.servlet;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.Locale;

import javax.portlet.MimeResponse;
import javax.portlet.PortletResponse;
import javax.portlet.ResourceResponse;
import javax.servlet.ServletOutputStream;

import org.apache.logging.log4j.Logger;
import org.apache.logging.log4j.LogManager;

/**
 * PortletServletResponseJSR286.
 *
 * @author Rene Gielen
 */
public class PortletServletResponseJSR286 extends PortletServletResponse {

  private static final Logger LOG = LogManager.getLogger(PortletServletResponseJSR286.class);
  
    public PortletServletResponseJSR286( PortletResponse portletResponse ) {
        super(portletResponse);
    }


    public void flushBuffer() throws IOException {
        if(portletResponse instanceof MimeResponse) {
            ((MimeResponse)portletResponse).flushBuffer();
        }
        else {
            throw new IllegalStateException(&quot;Only allowed in render or resource phase&quot;);
        }
    }

    public int getBufferSize() {
        if(portletResponse instanceof MimeResponse) {
            return ((MimeResponse)portletResponse).getBufferSize();
        }
        else {
            throw new IllegalStateException(&quot;Only allowed in render or resource phase&quot;);
        }
    }

    public String getCharacterEncoding() {
        if(portletResponse instanceof MimeResponse) {
            return ((MimeResponse)portletResponse).getCharacterEncoding();
        }

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/portlet/util/PortletUrlHelperJSR286.java
=======================================================================
package org.apache.struts2.portlet.util;

import org.apache.struts2.portlet.context.PortletActionContext;
import javax.portlet.PortletRequest;
import javax.portlet.MimeResponse;
import javax.portlet.BaseURL;
import javax.portlet.PortletSecurityException;
import java.util.Map;

import org.apache.logging.log4j.Logger;
import org.apache.logging.log4j.LogManager;

/**
 * PortletUrlJSR286Helper.
 *
 * @author Rene Gielen
 */
public class PortletUrlHelperJSR286 extends PortletUrlHelper {

    private static final Logger LOG = LogManager.getLogger(PortletUrlHelperJSR286.class);

    protected String encodeUrl( StringBuffer sb, PortletRequest req ) {
        MimeResponse resp = (MimeResponse) PortletActionContext.getResponse();
        return resp.encodeURL(req.getContextPath() + sb.toString());
    }

    protected Object createUrl( String scheme, String type, Map&lt;String, String[]&gt; portletParams ) {
        MimeResponse response = (MimeResponse) PortletActionContext.getResponse();
        BaseURL url;
        if (URLTYPE_NAME_ACTION.equalsIgnoreCase(type)) {
            if (LOG.isDebugEnabled()) LOG.debug(&quot;Creating action url&quot;);
            url = response.createActionURL();
        }
        else if(URLTYPE_NAME_RESOURCE.equalsIgnoreCase(type)) {
        	if (LOG.isDebugEnabled()) LOG.debug(&quot;Creating resource url&quot;);
        	url = response.createResourceURL();
        }
        else {
            if (LOG.isDebugEnabled()) LOG.debug(&quot;Creating render url&quot;);
            url = response.createRenderURL();
        }

        url.setParameters(portletParams);

        if (&quot;HTTPS&quot;.equalsIgnoreCase(scheme)) {
            try {
                url.setSecure(true);
            } catch ( PortletSecurityException e) {
                LOG.error(&quot;Cannot set scheme to https&quot;, e);
            }

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/main/java/org/apache/struts2/StrutsPortletTestCase.java
=======================================================================
package org.apache.struts2;

import com.opensymphony.xwork2.ActionContext;
import org.apache.logging.log4j.Logger;
import org.apache.logging.log4j.LogManager;
import org.apache.struts2.portlet.PortletConstants;
import org.apache.struts2.portlet.PortletPhase;
import org.springframework.mock.web.portlet.MockPortletContext;
import org.springframework.mock.web.portlet.MockPortletRequest;
import org.springframework.mock.web.portlet.MockPortletResponse;
import org.springframework.mock.web.portlet.MockPortletSession;
import org.springframework.mock.web.portlet.MockStateAwareResponse;

import javax.portlet.PortletMode;
import java.util.HashMap;
import java.util.Map;

/**
 * Base class used to test action in portlet environment
 */
public abstract class StrutsPortletTestCase extends StrutsTestCase {

    private static final Logger LOG = LogManager.getLogger(StrutsPortletTestCase.class);

    protected MockPortletSession portletSession;
    protected MockPortletRequest portletRequest;
    protected MockPortletResponse portletResponse;
    protected MockContext portletContext;

    @Override
    protected void initActionContext(ActionContext actionContext) {
        super.initActionContext(actionContext);
        initPortletContext(actionContext);
    }

    protected void initPortletContext(ActionContext actionContext) {
        LOG.debug(&quot;Initializing mock portlet environment&quot;);
        portletContext = new MockContext();
        portletContext.setMajorVersion(getMajorVersion());
        actionContext.put(StrutsStatics.STRUTS_PORTLET_CONTEXT, portletContext);

        portletRequest = new MockPortletRequest(portletContext);
        portletResponse = new MockStateAwareResponse();
        portletSession = new MockPortletSession();
        portletRequest.setSession(portletSession);
        actionContext.setSession(createSession());
        actionContext.put(PortletConstants.REQUEST, portletRequest);
        actionContext.put(PortletConstants.RESPONSE, portletResponse);
        actionContext.put(PortletConstants.MODE_NAMESPACE_MAP, new HashMap&lt;PortletMode, String&gt;());
        actionContext.put(PortletConstants.PHASE, PortletPhase.EVENT_PHASE);

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/components/PortletAction.java
=======================================================================
package org.apache.struts2.components;

import com.opensymphony.xwork2.Action;

public class PortletAction {

    public String execute() {
        return Action.SUCCESS;
    }

}

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/java/org/apache/struts2/components/PortletUrlRendererTest.java
=======================================================================
package org.apache.struts2.components;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionProxy;
import com.opensymphony.xwork2.util.ValueStack;
import org.apache.struts2.StrutsStatics;
import org.apache.struts2.StrutsTestCase;
import org.apache.struts2.portlet.PortletConstants;
import org.springframework.mock.web.portlet.MockMimeResponse;
import org.springframework.mock.web.portlet.MockPortletContext;
import org.springframework.mock.web.portlet.MockPortletRequest;

import javax.portlet.PortletContext;
import javax.portlet.PortletMode;

import java.io.StringWriter;
import java.io.Writer;
import java.util.Collections;

public class PortletUrlRendererTest extends StrutsTestCase {

    private ValueStack stack;

    public void setUp() throws Exception {
        super.setUp();

        ActionProxy actionProxy = getActionProxy(&quot;/portlettest/test&quot;); // creates new empty ActionContext
        ActionContext.getContext().put(ActionContext.ACTION_INVOCATION, actionProxy.getInvocation());

        PortletContext portletCtx = new MockPortletContext();
        ActionContext.getContext().put(StrutsStatics.STRUTS_PORTLET_CONTEXT, portletCtx);
        ActionContext.getContext().put(PortletConstants.REQUEST, new MockPortletRequest(portletCtx));
        ActionContext.getContext().put(PortletConstants.RESPONSE, new MockMimeResponse());
        ActionContext.getContext().put(PortletConstants.MODE_NAMESPACE_MAP, Collections.emptyMap());

        stack = actionProxy.getInvocation().getStack();
    }

    public void testRenderUrlWithNamespace() throws Exception {
        // given
        PortletUrlRenderer renderer = new PortletUrlRenderer();
        UrlProvider component = new URL(stack, request, response).getUrlProvider();
        Writer writer = new StringWriter();

        // when
        renderer.renderUrl(writer, component);

        // then
        assertTrue(&quot;/portlettest&quot;.equals(component.getNamespace()));
    }

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/resources/log4j2.xml
=======================================================================
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration&gt;
    &lt;Appenders&gt;
        &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;
            &lt;PatternLayout pattern=&quot;%d %5p (%c:%L) - %m%n&quot;/&gt;
        &lt;/Console&gt;
    &lt;/Appenders&gt;
    &lt;Loggers&gt;
        &lt;Root level=&quot;info&quot;&gt;
            &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;
        &lt;/Root&gt;
    &lt;/Loggers&gt;
&lt;/Configuration&gt;

=======================================================================
==/Users/lukaszlenart/Projects/Apache/struts/plugins/portlet/src/test/resources/struts.xml
=======================================================================
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE struts PUBLIC
	&quot;-//Apache Software Foundation//DTD Struts Configuration 2.5//EN&quot;
	&quot;http://struts.apache.org/dtds/struts-2.5.dtd&quot;&gt;

&lt;struts&gt;

    &lt;package name=&quot;test-portlet-default&quot; namespace=&quot;/portlettest&quot; extends=&quot;struts-portlet-default&quot;&gt;

        &lt;action name=&quot;test&quot; class=&quot;org.apache.struts2.components.PortletAction&quot;&gt;
            &lt;result type=&quot;redirectAction&quot;&gt;redirectAction&lt;/result&gt;
        &lt;/action&gt;

    &lt;/package&gt;

&lt;/struts&gt;
</pre></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2000&#x2013;2017
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All rights reserved.      
                    
      </p>
        </div>

                                                                  
<div class="row span12">Apache Struts, Struts, Apache, the Apache feather logo, and the Apache Struts
                project logos are trademarks of The Apache Software Foundation.</div>
                  
        
                </div>
    </footer>
        </body>
</html>
